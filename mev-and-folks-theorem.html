<!DOCTYPE html>
<html lang="en-US"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Is Folk‚Äôs theorem the Blockchain‚Äôs nightmare | Primitives</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Is Folk‚Äôs theorem the Blockchain‚Äôs nightmare" />
<meta name="author" content="Bruno Mazorra" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Is Folk‚Äôs theorem the Blockchain‚Äôs nightmare?" />
<meta property="og:description" content="Is Folk‚Äôs theorem the Blockchain‚Äôs nightmare?" />
<link rel="canonical" href="https://github.com/pages/manifoldfinance/primitives/mev-and-folks-theorem" />
<meta property="og:url" content="https://github.com/pages/manifoldfinance/primitives/mev-and-folks-theorem" />
<meta property="og:site_name" content="Primitives" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-05-20T00:00:00-07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Is Folk‚Äôs theorem the Blockchain‚Äôs nightmare" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Bruno Mazorra"},"dateModified":"2022-05-20T00:00:00-07:00","datePublished":"2022-05-20T00:00:00-07:00","description":"Is Folk‚Äôs theorem the Blockchain‚Äôs nightmare?","headline":"Is Folk‚Äôs theorem the Blockchain‚Äôs nightmare","mainEntityOfPage":{"@type":"WebPage","@id":"https://github.com/pages/manifoldfinance/primitives/mev-and-folks-theorem"},"url":"https://github.com/pages/manifoldfinance/primitives/mev-and-folks-theorem"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="https://github.com/pages/manifoldfinance/primitives/feed.xml" title="Primitives" /><!-- Emoji Favicon  -->
  <!-- Favicon -->
  <link
    rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÑ</text></svg>"
  />
  <!-- <link rel="shortcut icon" href="/pages/manifoldfinance/primitives/favicon.ico"> -->

  <!-- Bootstrap CSS -->
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu"
    crossorigin="anonymous"
  />

  <!-- Font Awesome -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
    integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
    crossorigin="anonymous"
  />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/pages/manifoldfinance/primitives/assets/css/main.min.css" />
</head>
<body><!-- Navigation -->
<nav
  class="navbar navbar-default navbar-custom navbar-fixed-top invert"
>
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <a class="navbar-brand" href="/pages/manifoldfinance/primitives/">Primitives</a>
      <button class="navbar-toggle" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/pages/manifoldfinance/primitives/">Home</a>
          </li><li>
            <a href="/pages/manifoldfinance/primitives/about">About</a>
          </li><li>
            <a href="/pages/manifoldfinance/primitives/archive">Archive</a>
          </li><li class="search-icon">
            <a href="javascript:void(0)">
              <i class="fas fa-search"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
<!-- Search -->
<div class="search-page">
  <div class="search-icon-close-container">
    <span class="search-icon-close">
      <i class="fas fa-chevron-down"></i>
    </span>
  </div>

  <div class="search-main container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <form>
          <input type="text" id="search-input" placeholder="$ grep..." />
        </form>
        <div id="search-results" class="mini-post-list"></div>
      </div>
    </div>
  </div>
</div>
<!-- Post Header --><header
  class="intro-header style-text"
>
  <div class="header-mask"></div><div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <div class="tags"></div>
          <h1>Is Folk's theorem the Blockchain's nightmare</h1>
          <h2 class="subheading"></h2>
          <span class="meta"
            >Posted by Bruno Mazorra on May 20, 2022</span
          >
        </div>
      </div>
    </div>
  </div>
</header><!-- Post Content -->
<style>
  /* Place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: 0.1em;
    }
  }
</style>
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"
      ><h1 id="is-folks-theorem-the-blockchains-nightmare">Is Folk‚Äôs theorem the Blockchain‚Äôs nightmare?</h1>

<blockquote>
  <p><a href="https://youtu.be/WsrzWuA0xdo">source, https://youtu.be/WsrzWuA0xdo</a></p>
</blockquote>

<h2 id="editors-note">Editors Note:</h2>

<p>Could not find these slides, so these are my own notes. There is more content
than this in the presentation.</p>

<h2 id="economic-rationality">Economic rationality</h2>

<h3 id="individual-rationality">Individual rationality</h3>

<p>An agent is individually rational if they try to maximize its own revenue.
Example: Construct block with max fees</p>

<p>A miner receives a set of transactions \(xx _{1}, \ldots, tx x _{n}\) with gas
price \(b_{1}, \ldots, b_{n}$ and $g_{1}, \ldots, g_{n}\) units of gas. The
miner can choose any subset of transactions $T X$ such that
\(\sum_{t x \in T X } g_{ tx } \leq \max\) Gas.</p>

<p>script[type=‚Äômath/tex‚Äô; mode=display] \begin{equation<em>} T X \text { such that }
\sum</em>{ tx \in T X } g<em>{ tx } \leq \max \text { Gas. } \end{equation</em>}</p>

<h3 id="example-transaction-inclusion">Example: Transaction inclusion</h3>

<ul>
  <li>A ‚Äúdummy‚Äù node orders transaction by timestamp, by transaction hash or
randomly.</li>
  <li>A rational node tries to solve the following optimization problem:
\begin{equation<em>} \begin{array}{ll} \max &amp; \sum</em>{i=1}^{n} x<em>{i} b</em>{i} g<em>{i} <br />
\text { s.t. } &amp; \sum</em>{i=1}^{n} x<em>{i} g</em>{i} \leq \max G a s, \ &amp; x<em>{i}
\in{0,1} \text { for } i=1, \ldots, n \end{array} \end{equation</em>}</li>
</ul>

<blockquote>
  <p>This is known as the Knapsack problem and is a NP-problem. In general,
Ethereum nodes use a greedy approximation algorithm to obtain an approximation
of the optimal solution.
<a href="https://youtu.be/WsrzWuA0xdo?t=157">source, https://youtu.be/WsrzWuA0xdo?t=157</a></p>
</blockquote>

<h2 id="game-theory">Game Theory</h2>

<h3 id="the-stage-game">The Stage Game</h3>

<p>A game is a tuple \(G =(N, A, u)\) where:</p>

<ul>
  <li>$N={1, \ldots, n}$ is the set of players.</li>
  <li>$A=\prod_{i=1}^{n} A_{i}$, where $A_{i}$ denotes the set of actions for a
player $i$.</li>
  <li>$u_{i}: A \rightarrow R$ is the utility function of a player $i$.</li>
  <li>Players want to maximize $u_{i}$ and take actions simultaneously.</li>
</ul>

<h3 id="strategy">Strategy</h3>

<p>A pure strategy can be thought as a plan subject to the observations they make
during the course of the game of play. A mixed strategy is an assignment of a
probability to each pure strategy.</p>

<h3 id="nash-equilibrium">Nash equilibrium</h3>

<p>A mixed strategy $s=\left(s_{1}, \ldots, s_{n}\right)$ is a Nash equilibrium if
for every player \(i\), and any strategy \(\tilde{s}_{i}\), we have that</p>

<p>script[type=‚Äômath/tex‚Äô; mode=display] \begin{equation<em>} u</em>{i}\left(s<em>{i},
s</em>{-i}\right) \geq u<em>{i}\left(\tilde{s}</em>{i}, s<em>{-i}\right) \end{equation</em>}</p>

<h3 id="theorem">Theorem</h3>

<h4 id="every-game-has-a-nash-equilibrium">Every game has a Nash equilibrium.</h4>

<h4 id="example-2-l2-game">Example 2: L2 game</h4>

<p>Game</p>

<p>Assume \(N=\{1,2\}\) and \(t=2\).</p>

<ul>
  <li>$EV =$ The value that can be extracted if players know the content of txs per
block.</li>
  <li>$CR =$ Commit and Reveal. If possible, slash the other player.</li>
  <li>RC $=$ Reveal and Commit. If possible, extract EV.</li>
  <li>$R =$ Reward per Block.</li>
  <li>$S =$ Slashing value s.t. $S¬†¬ª EV$.</li>
</ul>

<p>Problems and difficulties to cooperate</p>

<ul>
  <li>Anonymous players.</li>
  <li>Unable to commit to future strategies.</li>
  <li>Economic incentives to deviate from commitment. Conclusion on stage game
cooperation Hard to achieve consensus to cooperate.</li>
</ul>

<h4 id="what-if-games-are-played-indefinitely">What if games are played indefinitely?</h4>

<h5 id="non-myopic">Non-Myopic</h5>

<p>Players are non-myopic if they are concerned for presents and future payoffs.
Given an infinite sequence of payoffs \(r_{0}, r_{1}, r_{2}, \ldots\) for a
player $i$ and a discount factor \(\delta\) with \(0 \leq \delta&lt;1, i^{\prime}\)
s future discounted reward is \begin{equation<em>} \sum</em>{i=0}^{\infty} \delta^{i}
r<em>{i} \end{equation</em>} Intuition on discount factor:</p>

<ul>
  <li>The agent values about near term profits than future profits.</li>
  <li>The discount factor models the players‚Äô patience.</li>
</ul>

<p>\begin{equation<em>} \sum</em>{i=0}^{\infty} \delta^{i} r<em>{i} \end{equation</em>}</p>

<h3 id="repeated-game">Repeated game</h3>

<h4 id="repeated-games">Repeated games</h4>

<p>The stage game is played indefinitely many times. Players can observe past
actions. All player: share the same discount factor $\delta$. Player‚Äôs utility
Let $x_{t}$ be the tuple of actions played at round $t$, then the utility of a
player $i$ with discount factor $\delta$ is: \begin{equation<em>}
U</em>{i}=\sum<em>{t=0}^{\infty} \delta^{t} u</em>{i}\left(x<em>{t}\right) \end{equation</em>}</p>

<h3 id="folk-theorem-with-perfect-monitoring">Folk theorem with perfect monitoring</h3>

<h4 id="folk-theorem">Folk Theorem</h4>

<p>Let $G$ be any $n$-player game.</p>

<ul>
  <li>For all strictly pure-action individually rational action profiles √£, that is,
$u_{i}(\tilde{a})&gt;\operatorname{minmax}_{i}$ for all $i$, there is a
$\bar{\delta} \in(0,1)$ such that for every $\delta \in(\bar{\delta}, 1)$,
there exists a subgame-perfect equilibrium of the infinitely repeated game
with discount factor $\delta$ in which $\tilde{a}$ is played in every period.</li>
  <li>For all feasible tuple $v$, there is a $\bar{\delta} \in(0,1)$ such that for
every $\delta \in(\bar{\delta}, 1)$, there exists a subgame-perfect
equilibrium, with payoff $v$, of the infinitely repeated game with public
correlation and discount factor $\delta$.</li>
</ul>

<h4 id="example-1-arbitrage-competition-and-the-folk-theorem">Example 1: Arbitrage competition and the Folk theorem</h4>

<p>Since $(50 \,/\ 50 )$ is a feasible payoff, we have by Folk theorem that, if
both players are enough patient (for $\delta \geq 2 / 3$ holds), there exists a
Nash equilibrium \(\left(s_{1}, s_{2}\right)$ such that
$u_{i}\left(s_{1}, s_{2}\right)=50 \\). In these setting, we have that collision
among searchers induce:</p>

<ul>
  <li>$+$ profits for searchers,</li>
  <li>profits for miners. compared to the stage game.</li>
</ul>

<h4 id="system-performance">System performance</h4>

<p>There exists Nash equilibrium that do not lead to egalitarian distribution of
rewards.</p>

<blockquote>
  <p><a href="https://youtu.be/WsrzWuA0xdo?t=924">source, https://youtu.be/WsrzWuA0xdo?t=924</a></p>
</blockquote>

<h4 id="example-2-l2-with-threshold-decryption-scheme">Example 2: L2 with Threshold decryption scheme</h4>

<h5 id="repeated-game-all-for-nothing">Repeated game: All for nothing</h5>

<p>If players are enough patient $(\delta \approx 1)$, then there exists a Nash
Equilibrium where both players, play the Reveal-Commit strategy and extract the
MEV. System performance Since miners extract MEV from users, the users‚Äô revenue
decreases compared to the myopic model.</p>

<blockquote>
  <p><a href="https://youtu.be/WsrzWuA0xdo?t=966">source, https://youtu.be/WsrzWuA0xdo?t=966</a></p>
</blockquote>


        <!-- Post Pager -->
        <div>
          <hr style="visibility: hidden" />
          <ul class="pager"><li class="previous">
              <a
                href="/pages/manifoldfinance/primitives/uniswapv3"
                data-toggle="tooltip"
                data-placement="top"
                title="Uniswapv3"
              >
                Previous<br />
                <span>Uniswapv3</span>
              </a>
            </li><li class="next">
              <a
                href="/pages/manifoldfinance/primitives/the-allowchain"
                data-toggle="tooltip"
                data-placement="top"
                title="The Allowchain"
              >
                Next<br />
                <span>The Allowchain</span>
              </a>
            </li></ul>
          <hr style="visibility: hidden" />
        </div></div><!-- Side Catalog Container -->
      <div
        class="col-lg-2 col-lg-offset-0 visible-lg-block sidebar-container catalog-container"
      >
        <div class="side-catalog">
          <hr class="hidden-sm hidden-xs" />
          <h5>
            <a class="catalog-toggle" href="#">CATALOG</a>
          </h5>
          <ul class="catalog-body"></ul>
        </div>
      </div><!-- Sidebar Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"
      ><!-- Featured Tags -->
<section><hr class="hidden-sm hidden-xs"><h5>
        <a href="/pages/manifoldfinance/primitives/archive/">FEATURED TAGS</a>
    </h5>
    <div class="tags"><a data-sort="0014"
            href="/pages/manifoldfinance/primitives/archive/?tag=distributed+computing"
            title="distributed computing"
            rel="3">distributed computing</a><a data-sort="0014"
            href="/pages/manifoldfinance/primitives/archive/?tag=ethereum"
            title="ethereum"
            rel="3">ethereum</a><a data-sort="0015"
            href="/pages/manifoldfinance/primitives/archive/?tag=blockchain"
            title="blockchain"
            rel="2">blockchain</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=DAO"
            title="DAO"
            rel="1">DAO</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=Jekyll"
            title="Jekyll"
            rel="1">Jekyll</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=Markdown"
            title="Markdown"
            rel="1">Markdown</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=amm"
            title="amm"
            rel="1">amm</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=analysis"
            title="analysis"
            rel="1">analysis</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=client+development"
            title="client development"
            rel="1">client development</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=dao"
            title="dao"
            rel="1">dao</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=devops"
            title="devops"
            rel="1">devops</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=gitops"
            title="gitops"
            rel="1">gitops</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=governance"
            title="governance"
            rel="1">governance</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=json+rpc"
            title="json rpc"
            rel="1">json rpc</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=nix"
            title="nix"
            rel="1">nix</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=protocol"
            title="protocol"
            rel="1">protocol</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=routing"
            title="routing"
            rel="1">routing</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=sushiswap"
            title="sushiswap"
            rel="1">sushiswap</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=tooling"
            title="tooling"
            rel="1">tooling</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=trading"
            title="trading"
            rel="1">trading</a>
    </div>
</section>
</div>
    </div>
  </div>
</article>
<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><!-- SNS -->
<ul class="list-inline text-center">
  
  <li>
    <a href="/pages/manifoldfinance/primitives/feed.xml">
      <span class="fa-stack fa-lg">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li><li>
    <a target="_blank" href="mailto:sam@manifoldfinance.com">
      <span class="fa-stack fa-lg">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li><li>
    <a target="_blank" href="https://github.com/manifoldfinance">
      <span class="fa-stack fa-lg">
        <i class="fas fa-circle fa-stack-2x fa-inverse"></i>
        <i class="fab fa-github fa-stack-2x"></i>
      </span>
    </a>
  </li><li>
    <a href="https://twitter.com/foldfinance">
      <span class="fa-stack fa-lg">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li></ul>
<p class="copyright text-muted">See
          <a href="https://github.com/sambacha"></a> @sambacha | &copy; 2022-2024 manifoldfinance
        </p>
      </div>
    </div>
  </div>
</footer>

<!-- jQuery -->
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
  integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
  crossorigin="anonymous"
></script>

<!-- Bootstrap JavaScript-->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script
  src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"
  integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd"
  crossorigin="anonymous"
></script>

<!-- Simple Jekyll Search -->
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/simple-jekyll-search/1.7.12/simple-jekyll-search.min.js"
  integrity="sha512-APy7Ff/y4pdIHleqiTMcRZ8Wu6tjfqhJpgAcaCvTuFQPj/G+/A5u0uZi/DkfkuLQ6FeFmDJgh/zl0y3If/VUyA=="
  crossorigin="anonymous"
></script>

<!-- MathJax https://github.com/mathjax/MathJax/issues/2220 -->
<script>
  MathJax = {
    options: {
      renderActions: {
        /* add a new named action not to override the original 'find' action */
        find_script_mathtex: [
          10,
          function (doc) {
            for (const node of document.querySelectorAll(
              'script[type^="math/tex"]',
            )) {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(
                node.textContent,
                doc.inputJax[0],
                display,
              );
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = { node: text, delim: '', n: 0 };
              math.end = { node: text, delim: '', n: 0 };
              doc.math.push(math);
            }
          },
          '',
        ],
      },
    },
  };
</script>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.0.5/es5/tex-chtml.js"
  integrity="sha512-WIPUeuVusAT6dUtN6xKArYCBEa76ltyvaz3ltvQd+dy7ISdGJv1Y3y7eDBEF986YfNtmZGLdAaEBSgeBb+8OSg=="
  crossorigin="anonymous"
></script>

<!-- Async load function -->
<script>
  function async(u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener(
        'load',
        function (e) {
          c(null, e);
        },
        false,
      );
    }
    s.parentNode.insertBefore(o, s);
  }
</script><!-- AnchorJS -->
<script>
  async(
    'https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js',
    function () {
      anchors.options = {
        visible: 'hover',
      };
      anchors
        .add()
        .remove('.intro-header h1')
        .remove('.subheading')
        .remove('.sidebar-container h5');
    },
  );
</script><!-- Custom JavaScript -->
<script src="/pages/manifoldfinance/primitives/assets/js/main.js"></script><!-- Side Catalog -->
<script src="/pages/manifoldfinance/primitives/assets/js/catalog.js"></script></body>
</html>
