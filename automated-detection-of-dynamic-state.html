<!DOCTYPE html>
<html lang="en-US"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Automated Detection Of Dynamic State | Primitives</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Automated Detection Of Dynamic State" />
<meta name="author" content="Sam Wilson" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Automated Detection of Dynamic State Access in Solidity" />
<meta property="og:description" content="Automated Detection of Dynamic State Access in Solidity" />
<link rel="canonical" href="https://github.com/pages/manifoldfinance/primitives/automated-detection-of-dynamic-state" />
<meta property="og:url" content="https://github.com/pages/manifoldfinance/primitives/automated-detection-of-dynamic-state" />
<meta property="og:site_name" content="Primitives" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-02-10T00:00:00-08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Automated Detection Of Dynamic State" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sam Wilson"},"dateModified":"2022-02-10T00:00:00-08:00","datePublished":"2022-02-10T00:00:00-08:00","description":"Automated Detection of Dynamic State Access in Solidity","headline":"Automated Detection Of Dynamic State","mainEntityOfPage":{"@type":"WebPage","@id":"https://github.com/pages/manifoldfinance/primitives/automated-detection-of-dynamic-state"},"url":"https://github.com/pages/manifoldfinance/primitives/automated-detection-of-dynamic-state"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="https://github.com/pages/manifoldfinance/primitives/feed.xml" title="Primitives" /><!-- Emoji Favicon  -->
  <!-- Favicon -->
  <link
    rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÑ</text></svg>"
  />
  <!-- <link rel="shortcut icon" href="/pages/manifoldfinance/primitives/favicon.ico"> -->

  <!-- Bootstrap CSS -->
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu"
    crossorigin="anonymous"
  />

  <!-- Font Awesome -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
    integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
    crossorigin="anonymous"
  />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/pages/manifoldfinance/primitives/assets/css/main.min.css" />
</head>
<body><!-- Navigation -->
<nav
  class="navbar navbar-default navbar-custom navbar-fixed-top invert"
>
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <a class="navbar-brand" href="/pages/manifoldfinance/primitives/">Primitives</a>
      <button class="navbar-toggle" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/pages/manifoldfinance/primitives/">Home</a>
          </li><li>
            <a href="/pages/manifoldfinance/primitives/about">About</a>
          </li><li>
            <a href="/pages/manifoldfinance/primitives/archive">Archive</a>
          </li><li class="search-icon">
            <a href="javascript:void(0)">
              <i class="fas fa-search"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
<!-- Search -->
<div class="search-page">
  <div class="search-icon-close-container">
    <span class="search-icon-close">
      <i class="fas fa-chevron-down"></i>
    </span>
  </div>

  <div class="search-main container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <form>
          <input type="text" id="search-input" placeholder="$ grep..." />
        </form>
        <div id="search-results" class="mini-post-list"></div>
      </div>
    </div>
  </div>
</div>
<!-- Post Header --><header
  class="intro-header style-text"
>
  <div class="header-mask"></div><div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <div class="tags"></div>
          <h1>Automated Detection Of Dynamic State</h1>
          <h2 class="subheading"></h2>
          <span class="meta"
            >Posted by Sam Wilson on February 10, 2022</span
          >
        </div>
      </div>
    </div>
  </div>
</header><!-- Post Content -->
<style>
  /* Place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: 0.1em;
    }
  }
</style>
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container"
      ><h1 id="automated-detection-of-dynamic-state-access-in-solidity">Automated Detection of Dynamic State Access in Solidity</h1>

<p><em>Originally posted on
<a href="https://ethresear.ch/t/automated-detection-of-dynamic-state-access-in-solidity/7003">ethresear.ch</a>.</em></p>

<blockquote>
  <p>Reproduced from https://binarycake.ca/posts/ethereum-taint All rights are
respective of their owners - we make no claims.</p>
</blockquote>

<p>Deciding to support only static state access (SSA) or to support full dynamic
state access (DSA) is one of the remaining open questions on the Eth2 roadmap.
If a purely SSA system proves feasible, there are a number of benefits that
simplify:</p>

<ul>
  <li>State providers;</li>
  <li>Synchronous communication between execution environments;</li>
  <li>Account abstraction; and</li>
  <li>Transaction pools, witness aggregation and refreshes.</li>
</ul>

<p>Continuing the exploration of state provider models described
<a href="https://ethresear.ch/t/state-provider-models-in-ethereum-2-0/6750">earlier</a>, we
have roughly prototyped a modification to the solidity compiler that can detect
instances of DSA in smart contracts using taint analysis.</p>

<p>This proof of concept shows that it is possible to build tooling to support a
purely SSA Ethereum.</p>

<h2 id="background">Background</h2>

<h3 id="state-access--witnesses">State Access &amp; Witnesses</h3>

<p>For the direct push state provider model to work, the actor creating the
transaction should be able to build a witness (such as a Merkle proof) to every
storage location the transaction will read or write. If the transaction <em>does</em>
read from or write to a location not included in the witness, the transaction is
reverted, and its fees are forfeit.</p>

<p>DSA is a particularly problematic issue that can lead to an insufficient
witness. In concrete terms, DSA occurs when the <code class="language-plaintext highlighter-rouge">offset</code> argument to <code class="language-plaintext highlighter-rouge">sload</code> or
<code class="language-plaintext highlighter-rouge">sstore</code> is influenced by a previous <code class="language-plaintext highlighter-rouge">sload</code> result.</p>

<p>A short classification of some types of DSA, with solidity examples, can be
found <a href="https://gist.github.com/SamWilsn/369de587ac7373c8f77ed26079531671">here</a>.</p>

<h3 id="yul-language">Yul Language</h3>

<p>Example code in this article is written in pseudocode loosely resembling
EVM-flavored <a href="https://solidity.readthedocs.io/en/v0.6.3/yul.html">Yul</a>, an
internal representation language used in the solidity compiler. The prototype is
written as an optimization pass that operates on Yul.</p>

<h3 id="taint-analysis">Taint Analysis</h3>

<p>Taint analysis (or
<a href="https://en.wikipedia.org/wiki/Taint_checking">taint checking</a>) is a type of
data flow analysis where ‚Äútaint‚Äù flows from an upstream source into all
downstream variables. It is commonly used in web applications, where user
supplied values (like headers) are the source of taint, and variables used in
database queries are verified to be taint-free.</p>

<p>In a compiled language, it is conceptually similar to symbolic execution, though
much less complex.</p>

<p>Consider the following example, where <code class="language-plaintext highlighter-rouge">value</code> is tainted by an <code class="language-plaintext highlighter-rouge">sload</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>function tweedle() -&gt; twixt
{
    let zero := 0
    let value := sload(zero)
    let dee := 45
    let dum := add(dee, value)
    let rattle := 88

    let selector := gt(dum, 100)

    switch selector
    case 0 {
        twixt := dee
    }
    default {
        twixt := rattle
    }
}
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The graph below shows the flow of taint from <code class="language-plaintext highlighter-rouge">value</code> all the way to <code class="language-plaintext highlighter-rouge">twixt</code>. Red
nodes and edges indicate taint, and dotted lines represent indirect influence
(in this case, through the <code class="language-plaintext highlighter-rouge">switch</code>.)</p>

<p><img src="https://binarycake.ca/posts/ethereum-taint/00-tweedle.png" alt="tweedle" /></p>

<h2 id="prototype">Prototype</h2>

<h3 id="implementation">Implementation</h3>

<p>Implementation source code is available for
<a href="https://github.com/SamWilsn/solidity/blob/state-taint-0.5.16/libyul/optimiser/OrderDependentStateDestroyer.cpp">solidity 0.5</a>
and for
<a href="https://github.com/SamWilsn/solidity/blob/state-taint/libyul/optimiser/OrderDependentStateDestroyer.cpp">solidity 0.6</a>,
though not all features are implemented on both branches. Test cases can be
found <a href="https://github.com/SamWilsn/taint-tests">here</a>, though not all
successfully pass. This prototype is built as a Yul optimization pass, and so
requires <code class="language-plaintext highlighter-rouge">--optimize-yul --ir</code> as additional compiler flags.</p>

<p>Since this is a proof of concept, the output is messy and barely readable, the
implementation is inefficient, and is 100% capable of summoning
<a href="https://en.wikipedia.org/wiki/Undefined_behavior">nasal demons</a>. Obviously,
don‚Äôt use this software in any kind of production environment.</p>

<p>The analysis can be split into three conceptual phases: data gathering, function
resolution, and taint checking.</p>

<h4 id="data-gathering">Data Gathering</h4>

<p>In the data gathering phase, the analyzer visits each node in the Yul abstract
syntax tree (AST). This phase accomplishes several goals:</p>

<ul>
  <li>Creates a scope for each function;</li>
  <li>Tracks variable assignments, declarations, and function calls;</li>
  <li>Tracks return variables and arguments of <code class="language-plaintext highlighter-rouge">sload</code> and <code class="language-plaintext highlighter-rouge">sstore</code>;</li>
  <li>Resolves the effects of built-in functions (ex. <code class="language-plaintext highlighter-rouge">add</code>, <code class="language-plaintext highlighter-rouge">iszero</code>);</li>
  <li>Propagates constant values; and</li>
  <li>Converts memory accesses into special variables.</li>
</ul>

<p>The following is a simplified example of the information collected for the given
input:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre>{
    let zero := 0
    let ret_0 := fun_narf_19()
    sstore(ret_0, zero)

    function fun_narf_19() -&gt; vloc__4
    {
        let addr := 97
        let foo_0 := 54
        let foo_1 := sload(addr)

        vloc__4 := add(foo_0, foo_1)
    }
}
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The collected output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre>Known Variables:
    addr         [constant=97] [Untaintable]
    ret_0                      [Untaintable]
    zero         [constant=0]
    vloc__4
    foo_0        [constant=54]
    foo_1                      [Tainted]
    !!block_0    [constant]

Functions:
!!main() -&gt;
Data Flow:
!!block_0            -&gt; zero, ret_0,
Unresolved Function Calls:
- fun_narf_19

fun_narf_19() -&gt; vloc__4,
Data Flow:
addr                 -&gt; foo_1,
foo_1                -&gt; vloc__4,
foo_0                -&gt; vloc__4,
!!block_0            -&gt; addr, foo_1, foo_0, vloc__4,
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://binarycake.ca/posts/ethereum-taint/01-split.png" alt="split" /></p>

<p>The variable <code class="language-plaintext highlighter-rouge">!!block_0</code> is synthesized to represent indirect influence, such as
<code class="language-plaintext highlighter-rouge">if</code> statements and loops. This example does not contain any indirect influence,
though the block variables are still created. The <code class="language-plaintext highlighter-rouge">!!main</code> function represents
statements not contained in any other function, like the <code class="language-plaintext highlighter-rouge">sstore</code> in the example
code.</p>

<p>Data flow, in the example output, shows how data flows from upstream variables
(to the left of <code class="language-plaintext highlighter-rouge">-&gt;</code>) to downstream variables (on the right.)</p>

<p>Note that <code class="language-plaintext highlighter-rouge">fun_narf_19</code> is listed as an unresolved function call.</p>

<h5 id="a-note-on-memory">A Note on Memory</h5>

<p>Memory accesses are tracked by synthesizing variables (ex. <code class="language-plaintext highlighter-rouge">!!m0</code>) for every
<code class="language-plaintext highlighter-rouge">mstore</code>, similar to how compilers convert to
<a href="https://en.wikipedia.org/wiki/Static_single_assignment_form">single static assignment</a>
form. This process relies on very basic
<a href="https://en.wikipedia.org/wiki/Constant_folding#Constant_folding">constant folding</a>.
Should an <code class="language-plaintext highlighter-rouge">mstore</code> or an <code class="language-plaintext highlighter-rouge">mload</code> access an offset which is not computable at
compile time or has not been written to yet, a catch-all variable <code class="language-plaintext highlighter-rouge">!!memory</code> is
used instead.</p>

<h4 id="function-resolution">Function Resolution</h4>

<p>The function resolution phase iteratively embeds callee function scopes into the
caller‚Äôs scope, uniquely renaming variables in the data flow graph. Embedding
functions in this way allows accurate tracing between arguments and return
variables.</p>

<p>Continuing with the above example, the data flow graph after this phase looks
like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>Functions:
!!main() -&gt;
Data Flow:
!!block_0            -&gt; zero, ret_0, addr_embed0, foo_1_embed1, foo_0_embed3, vloc__4_embed2
addr_embed0          -&gt; foo_1_embed1,
foo_1_embed1         -&gt; vloc__4_embed2,
foo_0_embed3         -&gt; vloc__4_embed2,
vloc__4_embed2       -&gt; ret_0
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://binarycake.ca/posts/ethereum-taint/02-resolved.png" alt="resolved" /></p>

<h4 id="taint-checking">Taint Checking</h4>

<p>Last, and probably simplest, is taint checking. This phase walks through the
data flow graph, tainting every variable that is reachable from an initially
tainted variable.</p>

<p>Once the taint is propagated, the ‚Äúprotected‚Äù variables (variables used as the
key argument to an <code class="language-plaintext highlighter-rouge">sload</code> or <code class="language-plaintext highlighter-rouge">sstore</code>) are checked for taint. If tainted
protected variables are found, a taint violation exception is thrown.</p>

<p>In this example, <code class="language-plaintext highlighter-rouge">ret_0</code> is both protected and tainted.</p>

<p><img src="https://binarycake.ca/posts/ethereum-taint/03-taint.png" alt="tainted" /></p>

<h3 id="limitations--future-work">Limitations &amp; Future Work</h3>

<h4 id="call-graph-cycles">Call Graph Cycles</h4>

<p>A call graph cycle happens when a function <code class="language-plaintext highlighter-rouge">foo</code> calls a function <code class="language-plaintext highlighter-rouge">bar</code> and
<code class="language-plaintext highlighter-rouge">bar</code> also calls <code class="language-plaintext highlighter-rouge">foo</code>. For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>function foo(arg0) -&gt; ret0 {
    switch arg0
    case 0 {
        ret0 := bar()
    }
    default {
        ret0 := 1
    }
}

function bar() -&gt; ret1 {
    ret1 := foo(1)
}
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Cycles in the call graph currently cause the prototype to loop infinitely. It
should be possible to break these cycles by assuming all parameters of one
function influence all of that function‚Äôs return variables.</p>

<h4 id="constant-propagation">Constant Propagation</h4>

<p><a href="https://en.wikipedia.org/wiki/Constant_folding#Constant_folding">Constant propagation</a>
is the process of substituting the values of known constants in expressions at
compile time.</p>

<p>This prototype implements a very limited form of constant propagation to support
the <code class="language-plaintext highlighter-rouge">mstore</code> and <code class="language-plaintext highlighter-rouge">mload</code> instructions. If the offset argument to <code class="language-plaintext highlighter-rouge">mstore</code> or
<code class="language-plaintext highlighter-rouge">mload</code> can be computed at compile time, the taint analysis through memory is
more accurate (fewer misleading taint violations.)</p>

<h4 id="calling-contracts">Calling Contracts</h4>

<p>The builtin functions to call other contracts are disabled in the prototype.
Enabling them requires further thought on the ABI between contracts.</p>

<p>Currently the prototype assumes that call data opcodes (<code class="language-plaintext highlighter-rouge">CALLDATALOAD</code>,
<code class="language-plaintext highlighter-rouge">CALLDATASIZE</code>, <code class="language-plaintext highlighter-rouge">CALLDATACOPY</code>, etc) return untainted data. If a contract calls
another contract, that assumption is invalidated.</p>

<h4 id="control-flow">Control Flow</h4>

<p>The approach taken in this prototype to handle control flow and branching
(synthesizing <code class="language-plaintext highlighter-rouge">!!block</code> variables) is insufficient to accurately trace taint
through loops.</p>

<p>Consider the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>function fizzbuzz() {
    for { } 1 { }
    {
        let zero := 0
        let foo := sload(zero)
        let cond := eq(foo, zero)
        if cond {
            break
        }
    }
}
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Which roughly translates to the following data flow graph:</p>

<p><img src="https://binarycake.ca/posts/ethereum-taint/04-flow.png" alt="control flow" /></p>

<p><code class="language-plaintext highlighter-rouge">zero</code> is not influenced by <code class="language-plaintext highlighter-rouge">!!block_0</code> between where it is assigned and where
it is used for <code class="language-plaintext highlighter-rouge">sload</code>. In other words, <code class="language-plaintext highlighter-rouge">zero</code> is not dependent on <code class="language-plaintext highlighter-rouge">storage[0]</code>
at the time <code class="language-plaintext highlighter-rouge">sload</code> is called, even though the data flow graph thinks it is.</p>

<h4 id="bit-accurate-taint">Bit-Accurate Taint</h4>

<p>Variables in the prototype are tracked as an indivisible unit, which may be
tainted or clean. Tracking each bit of a variable separately enables more
accurate analysis.</p>

<p>This improvement is particularly relevant when using boolean operations (like
<code class="language-plaintext highlighter-rouge">or</code> &amp; <code class="language-plaintext highlighter-rouge">and</code>) and the <code class="language-plaintext highlighter-rouge">mload</code> instruction with non-256 bit types.</p>

<p>For example, the following snippet does not exhibit any DSA, though the
prototype will report a taint violation:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>function fizzbuzz(value)
{
    // Place a constant byte into memory.
    mstore(0, 0xAB)

    // Read a value from storage, place it into memory. This
    // taints memory offsets 1 through 32 inclusive.
    let from_storage := sload(0)
    mstore(1, from_storage)

    // Get the constant back from memory.
    let mem_tainted := mload(0)
    let mem_cleaned := and(mem_tainted, 0xFF)

    sstore(mem_cleaned, 0xC0FFEE)
}
</pre></td></tr></tbody></table></code></pre></div></div>

<p>After execution, the first 33 bytes of memory look like:</p>

<p><img src="https://binarycake.ca/posts/ethereum-taint/05-bytes.png" alt="bytes" /></p>

<p>Since <code class="language-plaintext highlighter-rouge">mload(0)</code> populates <code class="language-plaintext highlighter-rouge">mem_tainted</code> with the first 32 bytes of memory,
<code class="language-plaintext highlighter-rouge">mem_tainted</code> contains 31 tainted bytes (all bytes after <code class="language-plaintext highlighter-rouge">memory[0]</code>).
<code class="language-plaintext highlighter-rouge">mem_cleaned</code>, on the other hand, contains no tainted bytes, since only the
first byte can influence its value; the other bits are masked out by <code class="language-plaintext highlighter-rouge">and</code>.</p>

<h4 id="unimplemented-features-in-yul">Unimplemented Features in Yul</h4>

<p>The solidity compiler‚Äôs Yul implementation doesn‚Äôt yet support libraries. This
makes analyzing existing contracts tedious at best.</p>

<h2 id="conclusions">Conclusions</h2>

<p>Although the limitations mentioned above present challenges for analyzing
existing contracts for DSA, we believe that existing compilers <strong>can</strong> be
extended, with reasonable effort, to detect and prevent DSA while maintaining
features. Furthermore, given the ease of inadvertently introducing DSA, we
believe that adding this feature to smart contract compilers is <strong>necessary</strong> to
write secure code.</p>

<p><a href="https://github.com/PhABC/uniswap-solidity/blob/2434367a66b6091db7b808ed91e7ade61fad6f7d/contracts/tokens/ERC20.sol">One contract</a>,
part of <a href="https://ethresear.ch/u/phabc/summary">@PhABC</a>‚Äôs uniswap-solidity, did
successfully compile with minimal modification.</p>

<p>A big thanks to Quilt for supporting this research and providing invaluable
review and feedback.</p>


        <!-- Post Pager -->
        <div>
          <hr style="visibility: hidden" />
          <ul class="pager"><li class="previous">
              <a
                href="/pages/manifoldfinance/primitives/lvm-localpv"
                data-toggle="tooltip"
                data-placement="top"
                title="lvm-localpv - a good upgrade to local-path-provisioner"
              >
                Previous<br />
                <span>lvm-localpv - a good upgrade to local-path-provisioner</span>
              </a>
            </li><li class="next">
              <a
                href="/pages/manifoldfinance/primitives/uniswapv3"
                data-toggle="tooltip"
                data-placement="top"
                title="Uniswapv3"
              >
                Next<br />
                <span>Uniswapv3</span>
              </a>
            </li></ul>
          <hr style="visibility: hidden" />
        </div></div><!-- Side Catalog Container -->
      <div
        class="col-lg-2 col-lg-offset-0 visible-lg-block sidebar-container catalog-container"
      >
        <div class="side-catalog">
          <hr class="hidden-sm hidden-xs" />
          <h5>
            <a class="catalog-toggle" href="#">CATALOG</a>
          </h5>
          <ul class="catalog-body"></ul>
        </div>
      </div><!-- Sidebar Container -->
      <div
        class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 sidebar-container"
      ><!-- Featured Tags -->
<section><hr class="hidden-sm hidden-xs"><h5>
        <a href="/pages/manifoldfinance/primitives/archive/">FEATURED TAGS</a>
    </h5>
    <div class="tags"><a data-sort="0014"
            href="/pages/manifoldfinance/primitives/archive/?tag=distributed+computing"
            title="distributed computing"
            rel="3">distributed computing</a><a data-sort="0014"
            href="/pages/manifoldfinance/primitives/archive/?tag=ethereum"
            title="ethereum"
            rel="3">ethereum</a><a data-sort="0015"
            href="/pages/manifoldfinance/primitives/archive/?tag=blockchain"
            title="blockchain"
            rel="2">blockchain</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=DAO"
            title="DAO"
            rel="1">DAO</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=Jekyll"
            title="Jekyll"
            rel="1">Jekyll</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=Markdown"
            title="Markdown"
            rel="1">Markdown</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=amm"
            title="amm"
            rel="1">amm</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=analysis"
            title="analysis"
            rel="1">analysis</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=client+development"
            title="client development"
            rel="1">client development</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=dao"
            title="dao"
            rel="1">dao</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=devops"
            title="devops"
            rel="1">devops</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=gitops"
            title="gitops"
            rel="1">gitops</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=governance"
            title="governance"
            rel="1">governance</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=json+rpc"
            title="json rpc"
            rel="1">json rpc</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=nix"
            title="nix"
            rel="1">nix</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=protocol"
            title="protocol"
            rel="1">protocol</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=routing"
            title="routing"
            rel="1">routing</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=sushiswap"
            title="sushiswap"
            rel="1">sushiswap</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=tooling"
            title="tooling"
            rel="1">tooling</a><a data-sort="0016"
            href="/pages/manifoldfinance/primitives/archive/?tag=trading"
            title="trading"
            rel="1">trading</a>
    </div>
</section>
</div>
    </div>
  </div>
</article>
<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><!-- SNS -->
<ul class="list-inline text-center">
  
  <li>
    <a href="/pages/manifoldfinance/primitives/feed.xml">
      <span class="fa-stack fa-lg">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li><li>
    <a target="_blank" href="mailto:sam@manifoldfinance.com">
      <span class="fa-stack fa-lg">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li><li>
    <a target="_blank" href="https://github.com/manifoldfinance">
      <span class="fa-stack fa-lg">
        <i class="fas fa-circle fa-stack-2x fa-inverse"></i>
        <i class="fab fa-github fa-stack-2x"></i>
      </span>
    </a>
  </li><li>
    <a href="https://twitter.com/foldfinance">
      <span class="fa-stack fa-lg">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li></ul>
<p class="copyright text-muted">See
          <a href="https://github.com/sambacha"></a> @sambacha | &copy; 2022-2024 manifoldfinance
        </p>
      </div>
    </div>
  </div>
</footer>

<!-- jQuery -->
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
  integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
  crossorigin="anonymous"
></script>

<!-- Bootstrap JavaScript-->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script
  src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"
  integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd"
  crossorigin="anonymous"
></script>

<!-- Simple Jekyll Search -->
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/simple-jekyll-search/1.7.12/simple-jekyll-search.min.js"
  integrity="sha512-APy7Ff/y4pdIHleqiTMcRZ8Wu6tjfqhJpgAcaCvTuFQPj/G+/A5u0uZi/DkfkuLQ6FeFmDJgh/zl0y3If/VUyA=="
  crossorigin="anonymous"
></script>

<!-- MathJax https://github.com/mathjax/MathJax/issues/2220 -->
<script>
  MathJax = {
    options: {
      renderActions: {
        /* add a new named action not to override the original 'find' action */
        find_script_mathtex: [
          10,
          function (doc) {
            for (const node of document.querySelectorAll(
              'script[type^="math/tex"]',
            )) {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(
                node.textContent,
                doc.inputJax[0],
                display,
              );
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = { node: text, delim: '', n: 0 };
              math.end = { node: text, delim: '', n: 0 };
              doc.math.push(math);
            }
          },
          '',
        ],
      },
    },
  };
</script>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.0.5/es5/tex-chtml.js"
  integrity="sha512-WIPUeuVusAT6dUtN6xKArYCBEa76ltyvaz3ltvQd+dy7ISdGJv1Y3y7eDBEF986YfNtmZGLdAaEBSgeBb+8OSg=="
  crossorigin="anonymous"
></script>

<!-- Async load function -->
<script>
  function async(u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener(
        'load',
        function (e) {
          c(null, e);
        },
        false,
      );
    }
    s.parentNode.insertBefore(o, s);
  }
</script><!-- AnchorJS -->
<script>
  async(
    'https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js',
    function () {
      anchors.options = {
        visible: 'hover',
      };
      anchors
        .add()
        .remove('.intro-header h1')
        .remove('.subheading')
        .remove('.sidebar-container h5');
    },
  );
</script><!-- Custom JavaScript -->
<script src="/pages/manifoldfinance/primitives/assets/js/main.js"></script><!-- Side Catalog -->
<script src="/pages/manifoldfinance/primitives/assets/js/catalog.js"></script></body>
</html>
